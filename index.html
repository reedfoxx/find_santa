<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ó–Ω–∞–π–¥–∏ –°–∞–Ω—Ç—É</title>

<style>
:root{
  --bg:#ffffff;
  --text:#714b4b;
  --accent:#ffd166;
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,Arial}
.wrap{max-width:1100px;margin:18px auto;padding:12px;height:calc(100% - 36px);display:flex;flex-direction:column;gap:12px}
.top{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(90deg,#f9fbff88,#ffffff88)}
.controls{margin-left:auto;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.play{position:relative;flex:1;border-radius:12px;overflow:hidden;background:#ffffff;padding:8px;min-height:320px;box-shadow:0 0 12px #00000015 inset}
.emoji{position:absolute;cursor:pointer;font-size:40px;user-select:none;transition:.2s}
.emoji:hover{transform:translateY(-6px) scale(1.06)}
.emoji.found{opacity:0.25;transform:scale(0.85);pointer-events:none}
.overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:#ffffff88;backdrop-filter:blur(3px)}
.overlay.show{display:flex}
.win{background:#fdfeff;padding:28px 34px;border-radius:18px;text-align:center}
.footer{padding:8px 12px;font-size:13px;opacity:.85}
@media(max-width:720px){.top{flex-direction:column;align-items:flex-start}}
</style>
</head>

<body>
<div class="wrap">

  <div class="top">
    <div class="title">üéÑ –ì—Ä–∞ ‚Äî –ó–Ω–∞–π–¥–∏ –°–∞–Ω—Ç—É</div>

    <div class="controls">
      <label>–©–æ —à—É–∫–∞—Ç–∏:
        <select id="targetSelect">
          <option value="üéÖ">–°–∞–Ω—Ç–∞ üéÖ</option>
          <option value="‚õÑ">–°–Ω—ñ–≥–æ–≤–∏–∫ ‚õÑ</option>
          <option value="üéÑ">–Ø–ª–∏–Ω–∫–∞ üéÑ</option>
          <option value="üéÅ">–ü–æ–¥–∞—Ä—É–Ω–æ–∫ üéÅ</option>
        </select>
      </label>

      <label>–¶—ñ–ª—å:
        <input id="targetCount" type="number" min="1" max="50" value="5">
      </label>

      <label>–í—Å—å–æ–≥–æ:
        <input id="totalCount" type="number" min="5" max="200" value="50">
      </label>

      <button id="startBtn">–°—Ç–∞—Ä—Ç</button>
    </div>
  </div>

  <div class="info">
    –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞–π—Ç–∏: <strong id="remaining">0</strong> <span id="previewEmoji">üéÖ</span>
    <div style="margin-left:auto">–ö–ª—ñ–∫–∞–π –ø–æ –µ–º–æ–¥–∑—ñ</div>
  </div>

  <div class="play" id="playArea">
    <div class="overlay" id="overlay">
      <div class="win">
        <h2 id="winTitle">–í—ñ—Ç–∞—é! üéâ</h2>
        <p id="winText"></p>
        <button id="replayBtn">–ì—Ä–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
      </div>
    </div>
  </div>

  <div class="footer">
    <a href="https://reedfoxx.github.io/main/" target="_blank" rel="noopener" style="color:white;text-decoration:underline">
      –í—ñ–¥–≤—ñ–¥–∞—Ç–∏ —Å–∞–π—Ç
    </a>
  </div>

</div>

<script>
const playArea = document.getElementById("playArea");
const startBtn = document.getElementById("startBtn");
const replayBtn = document.getElementById("replayBtn");
const targetSelect = document.getElementById("targetSelect");
const targetCountInput = document.getElementById("targetCount");
const totalCountInput = document.getElementById("totalCount");
const remainingEl = document.getElementById("remaining");
const previewEmoji = document.getElementById("previewEmoji");
const overlay = document.getElementById("overlay");
const winText = document.getElementById("winText");

const pool = ["üéÖ","‚õÑ","üéÑ","üéÅ","‚ú®","‚ùÑÔ∏è","üîî","‚≠ê","üß¶","üß£","üß∏","üç¨"];

let state = {
  targetEmoji: "üéÖ",
  targetCount: 5,
  totalCount: 50,
  found: 0,
  placed: []
};

function noOverlap(x, y, w, h) {
  return !state.placed.some(p =>
    !(x + w < p.x || p.x + p.w < x || y + h < p.y || p.y + p.h < y)
  );
}

function placeEmoji(char, isTarget) {
  const box = document.createElement("div");
  box.className = "emoji";
  box.textContent = char;

  box.style.fontSize = (26 + Math.random() * 34) + "px";

  // üî• –ì–û–õ–û–í–ù–ê –ü–†–ê–í–ö–ê ‚Äî –¶–Ü–õ–¨–û–í–Ü –ó–ê–í–ñ–î–ò –ü–û–í–ï–†–•
  box.style.zIndex = isTarget ? 9999 : 1;

  playArea.appendChild(box);
  const r = box.getBoundingClientRect();
  const w = r.width;
  const h = r.height;

  const area = playArea.getBoundingClientRect();
  let x, y, tries = 0;

  do {
    x = Math.random() * (area.width - w);
    y = Math.random() * (area.height - h);
    tries++;
  } while (tries < 200 && !noOverlap(x, y, w, h));

  box.style.left = x + "px";
  box.style.top = y + "px";

  state.placed.push({x,y,w,h});

  if (isTarget) {
    box.dataset.target = "1";
    box.onclick = () => {
      if (box.classList.contains("found")) return;
      box.classList.add("found");
      state.found++;
      remainingEl.textContent = state.targetCount - state.found;
      if (state.found === state.targetCount) showWin();
    };
  }

  return box;
}

function generate() {
  playArea.querySelectorAll(".emoji").forEach(e => e.remove());
  state.placed = [];
  state.found = 0;

  const distractorCount = state.totalCount - state.targetCount;
  const distractors = pool.filter(e => e !== state.targetEmoji);

  for (let i = 0; i < state.targetCount; i++) {
    placeEmoji(state.targetEmoji, true);
  }

  for (let i = 0; i < distractorCount; i++) {
    placeEmoji(distractors[Math.floor(Math.random() * distractors.length)], false);
  }

  remainingEl.textContent = state.targetCount;
}

function showWin() {
  winText.textContent = `–¢–∏ –∑–Ω–∞–π—à–æ–≤ ${state.targetCount} √ó ${state.targetEmoji}!`;
  overlay.classList.add("show");
}

function start() {
  overlay.classList.remove("show");

  state.targetEmoji = targetSelect.value;
  state.targetCount = +targetCountInput.value;
  state.totalCount = +totalCountInput.value;

  previewEmoji.textContent = state.targetEmoji;

  setTimeout(generate, 50);
}

startBtn.onclick = start;
replayBtn.onclick = start;

window.onload = () => setTimeout(start, 200);

window.onresize = () => {
  clearTimeout(window._rz);
  window._rz = setTimeout(() => start(), 300);
};
</script>
<footer style="
    width:100%;
    padding:12px 0;
    text-align:center;
    font-family:Arial, sans-serif;
    font-size:14px;
    color:#555;
">
    ¬© 2025 ‚Ä¢ –ù–∞–≤—á–∞–ª—å–Ω–∏–π –≥—Ä–∞ –≤—ñ–¥ 
    <a href="https://t.me/movoznayko" target="_blank" rel="noopener noreferrer" 
       style="color:#2b7cff; text-decoration:none;">
         –ú–æ–≤–æ–ó–Ω–∞–π–∫–æ
    </a>
     ‚Ä¢ –ù–∞—à —Å–∞–π—Ç:
    <a href="https://reedfoxx.github.io/main/" target="_blank" rel="noopener noreferrer" 
       style="color:#2b7cff; text-decoration:none;">
       Reed Foxx
    </a>
</footer>
</body>
</html>

